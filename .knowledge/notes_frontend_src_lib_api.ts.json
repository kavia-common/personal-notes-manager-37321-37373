{"is_source_file": true, "format": "TypeScript", "description": "This file defines functions for interacting with a notes API, including fetching, creating, updating, and deleting notes. It also includes fallback to local persistence when the remote API is unavailable, and exports an async API interface.", "external_files": ["./types", "./persist"], "external_methods": ["isNote", "persist", "createNotePersist", "updateNotePersist", "deleteNotePersist", "listNotes", "getNote"], "published": ["listNotes", "getNote", "createNote", "updateNote", "deleteNote", "syncReplaceAll", "syncUpsert", "syncDelete", "api", "ApiClient"], "classes": [], "methods": [{"name": "export async function listNotes(): Promise<Note[]> { listNotes", "description": "Fetches the list of notes from remote API if available, falling back to local persistence.", "scope": "", "scopeKind": ""}, {"name": "export async function getNote(id: NoteId): Promise<Note | null> { getNote", "description": "Retrieves a single note by ID from remote API if available, otherwise from local persistence.", "scope": "", "scopeKind": ""}, {"name": "export async function createNote(input: NewNoteInput): Promise<Note> { createNote", "description": "Creates a new note via remote API if possible, otherwise creates locally.", "scope": "", "scopeKind": ""}, {"name": "export async function updateNote(input: UpdateNoteInput): Promise<Note> { updateNote", "description": "Updates an existing note via remote API if possible, otherwise updates locally.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteNote(id: NoteId): Promise<void> { deleteNote", "description": "Deletes a note via remote API if possible, otherwise deletes locally.", "scope": "", "scopeKind": ""}, {"name": "function apiUrl(path: string): string { apiUrl", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function normalizeNote(v: unknown): Note | null { normalizeNote", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "normalizeNote", "persistListNotes", "persistGetNote", "createNotePersist", "updateNotePersist", "deleteNotePersist"], "search-terms": ["Notes API", "TypeScript", "remote fallback", "notes management"], "state": 2, "file_id": 29, "knowledge_revision": 108, "git_revision": "", "revision_history": [{"106": ""}, {"107": ""}, {"108": ""}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^const API_BASE =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "ApiClient", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^export type ApiClient = typeof api;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "AsyncNotesAPI", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^export type AsyncNotesAPI = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^export const api: AsyncNotesAPI = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "apiUrl", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^function apiUrl(path: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^  createNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^export async function createNote(input: NewNoteInput): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^  deleteNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^export async function deleteNote(id: NoteId): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^  getNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^export async function getNote(id: NoteId): Promise<Note | null> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const json = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const json = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "getNote", "scopeKind": "function"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const json = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const json = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^        const list = json$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^export async function listNotes(): Promise<Note[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const n = normalizeNote(json);$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const n = normalizeNote(json);$/", "language": "TypeScript", "kind": "constant", "scope": "getNote", "scopeKind": "function"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const n = normalizeNote(json);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "normalizeNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^function normalizeNote(v: unknown): Note | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(apiUrl(\"\\/notes\"), {$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(apiUrl(\"\\/notes\"), {$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(apiUrl(`\\/notes\\/${encodeURIComponent(id)}`), {$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(apiUrl(`\\/notes\\/${encodeURIComponent(id)}`), {$/", "language": "TypeScript", "kind": "constant", "scope": "getNote", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(apiUrl(`\\/notes\\/${encodeURIComponent(input.id)}`), {$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "syncDelete", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^  syncDelete: persist.syncDelete,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "syncReplaceAll", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^  syncReplaceAll: persist.syncReplaceAll,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "syncUpsert", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^  syncUpsert: persist.syncUpsert,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^  updateNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-37321-37373/notes_frontend/src/lib/api.ts", "pattern": "/^export async function updateNote(input: UpdateNoteInput): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}], "hash": "f79275d0d4e047a140a0e27b80ecb0c2", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/api.ts"}